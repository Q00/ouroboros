<p align="center">
  <br/>
  <br/>
  <br/>
</p>

<h1 align="center">
  <br/>
  â—¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—¯
  <br/>
  <br/>
  O U R O B O R O S
  <br/>
  <br/>
  â—¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â—¯
  <br/>
  <br/>
</h1>

<p align="center">
  <em>The serpent that devours itself to be reborn anew.</em>
</p>

<p align="center">
  <a href="https://pypi.org/project/ouroboros-ai/"><img src="https://img.shields.io/pypi/v/ouroboros-ai?color=blue" alt="PyPI"></a>
  <a href="https://python.org"><img src="https://img.shields.io/badge/python-3.14+-blue" alt="Python"></a>
  <a href="LICENSE"><img src="https://img.shields.io/badge/license-MIT-green" alt="License"></a>
</p>

<p align="center">
  <a href="#-philosophy">Philosophy</a> â€¢
  <a href="#-the-six-phases">Phases</a> â€¢
  <a href="#-architecture">Architecture</a> â€¢
  <a href="#-prerequisites">Prerequisites</a> â€¢
  <a href="#-quick-start">Start</a> â€¢
  <a href="#-roadmap">Roadmap</a> â€¢
  <a href="#-contributing">Contributing</a>
</p>

<br/>

<p align="center">
  <code>75 modules</code> Â· <code>1,341 tests</code> Â· <code>97%+ coverage</code>
</p>

<br/>

---

<br/>

## â—ˆ The Premise

<br/>

<table>
<tr>
<td width="100%">

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                        â•‘
â•‘              ã€Œ HUMANS ARE NOT RATIONAL ã€                â•‘
â•‘                                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

</td>
</tr>
</table>

Human requirements arrive **ambiguous**, **incomplete**, **contradictory**, and **surface-level**.

If AI executes such input directly â†’ `GIGO` (Garbage In, Garbage Out).

<br/>

---

<br/>

## â—ˆ Philosophy

<br/>

### The Two Ancient Methods

To transmute irrational input into executable truth, we invoke:

<br/>

<table>
<tr>
<td width="50%" valign="top">

#### âŒ¬ SOCRATIC QUESTIONING

```
"Why do you want this?"

"What if you don't get it?"

"Is that truly necessary?"

"What are you assuming?"
```

â†³ *Reveals hidden assumptions* <br/>
â†³ *Exposes contradictions* <br/>
â†³ *Challenges the obvious* <br/>

</td>
<td width="50%" valign="top">

#### âŒ¬ ONTOLOGICAL ANALYSIS

```
"What IS this, really?"

"Symptom or root cause?"

"What's the essence?"

"What must exist first?"
```

â†³ *Finds the root problem* <br/>
â†³ *Separates essential from accidental* <br/>
â†³ *Maps the structure of being* <br/>

</td>
</tr>
</table>

<br/>

These iterate until a **Seed** crystallizesâ€”a specification with `Ambiguity â‰¤ 0.2`.

*Only then does execution begin. Only then can it succeed.*

<br/>

---

<br/>

### The Governing Principle

<br/>

<table>
<tr>
<td width="100%">

```

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                            â”‚
â”‚                                                            â”‚
â”‚         ã€Œ FRUGAL BY DEFAULT, RIGOROUS IN VERIFICATION ã€     â”‚
â”‚                                                            â”‚
â”‚                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯


```

</td>
</tr>
</table>

<br/>

| Paradox | Problem | Ouroboros Solution |
|---------|---------|-------------------|
| Power without Wisdom | Frontier models cost 30x | Start at 1x, escalate only when needed |
| Speed without Judgment | Fast models miss nuance | 3-stage evaluation catches errors |
| Iteration without Direction | Infinite loops | Drift detection + Retrospective |

<br/>

---

<br/>

## â—ˆ The Six Phases

<br/>

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                                â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”ƒ
â”ƒ      â”‚ PHASE 0 â”‚  B I G   B A N G                                              â”ƒ
â”ƒ      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                               â”ƒ
â”ƒ           â”‚      Socratic + Ontological questioning                            â”ƒ
â”ƒ           â”‚      From irrational chaos â†’ crystallized Seed                     â”ƒ
â”ƒ           â”‚      Gate: Ambiguity â‰¤ 0.2                                         â”ƒ
â”ƒ           â–¼                                                                    â”ƒ
â”ƒ      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”ƒ
â”ƒ      â”‚ PHASE 1 â”‚  P A L   R O U T E R                                          â”ƒ
â”ƒ      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                               â”ƒ
â”ƒ           â”‚      Progressive Adaptive LLM selection                            â”ƒ
â”ƒ           â”‚      1x (Frugal) â†’ 10x (Standard) â†’ 30x (Frontier)                 â”ƒ
â”ƒ           â”‚      "Choose your weapon wisely"                                   â”ƒ
â”ƒ           â–¼                                                                    â”ƒ
â”ƒ      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”ƒ
â”ƒ      â”‚ PHASE 2 â”‚  D O U B L E   D I A M O N D                                  â”ƒ
â”ƒ      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                               â”ƒ
â”ƒ           â”‚      Discover â†’ Define â†’ Design â†’ Deliver                          â”ƒ
â”ƒ           â”‚      Diverge to explore, converge to execute                       â”ƒ
â”ƒ           â”‚      Recursive decomposition until atomic                          â”ƒ
â”ƒ           â–¼                                                                    â”ƒ
â”ƒ      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”ƒ
â”ƒ      â”‚ PHASE 3 â”‚  R E S I L I E N C E                                          â”ƒ
â”ƒ      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                               â”ƒ
â”ƒ           â”‚      Stagnation detection (4 patterns)                             â”ƒ
â”ƒ           â”‚      Lateral thinking via persona rotation                         â”ƒ
â”ƒ           â”‚      "When stuck, think sideways"                                  â”ƒ
â”ƒ           â–¼                                                                    â”ƒ
â”ƒ      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”ƒ
â”ƒ      â”‚ PHASE 4 â”‚  E V A L U A T I O N                                          â”ƒ
â”ƒ      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                               â”ƒ
â”ƒ           â”‚      Stage 1: Mechanical ($0) â€” lint, build, test                  â”ƒ
â”ƒ           â”‚      Stage 2: Semantic ($$) â€” AC compliance, drift                 â”ƒ
â”ƒ           â”‚      Stage 3: Consensus ($$$$) â€” Advocate/Devil/Judge debate       â”ƒ
â”ƒ           â–¼                                                                    â”ƒ
â”ƒ      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”ƒ
â”ƒ      â”‚ PHASE 5 â”‚  S E C O N D A R Y   L O O P                                  â”ƒ
â”ƒ      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                               â”ƒ
â”ƒ           â”‚      TODO Registry: defer the trivial                              â”ƒ
â”ƒ           â”‚      Batch processing after primary goal                           â”ƒ
â”ƒ           â”‚      "Pursue the essential"                                        â”ƒ
â”ƒ           â”‚                                                                    â”ƒ
â”ƒ           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â†º â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ                                                                                â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```

<br/>

---

<br/>

## â—ˆ Economic Model

<br/>

> *Intelligence has a cost. Ouroboros optimizes it.*

<br/>

| Tier | Cost | When | Philosophy |
|:----:|:----:|------|------------|
| `FRUGAL` | **1x** | complexity < 0.4 | *"Most problems are simpler than they appear"* |
| `STANDARD` | **10x** | complexity < 0.7 | *"Pay for quality when it matters"* |
| `FRONTIER` | **30x** | critical decisions | *"Some choices cannot be undone"* |

<br/>

```python
def select_approach(task):
    if task.complexity < 0.4:
        return Tier.FRUGAL       # Start humble

    if task.reversible:
        return Tier.STANDARD     # Move fast

    if task.affects_direction:
        return Tier.FRONTIER     # Think deeply

    return Tier.STANDARD
```

<br/>

**Result**: `~85% cost reduction` compared to "always use the best model"

<br/>

---

<br/>

## â—ˆ Architecture

<br/>

```
src/ouroboros/
â”‚
â”œâ”€â”€ core/           â—† The essence: types, errors, seed, ontology
â”‚
â”œâ”€â”€ bigbang/        â—‡ Phase 0: Interview â†’ Ontology â†’ Ambiguity â†’ Seed
â”‚
â”œâ”€â”€ routing/        â—‡ Phase 1: PAL router, complexity, tiers
â”‚
â”œâ”€â”€ execution/      â—‡ Phase 2: Double Diamond, decomposition
â”‚
â”œâ”€â”€ resilience/     â—‡ Phase 3: Stagnation, lateral thinking
â”‚
â”œâ”€â”€ evaluation/     â—‡ Phase 4: Mechanical, semantic, consensus
â”‚
â”œâ”€â”€ secondary/      â—‡ Phase 5: TODO registry, batch scheduler
â”‚
â”œâ”€â”€ orchestrator/   â˜… Claude Agent SDK integration
â”‚
â”œâ”€â”€ observability/  â—‹ Drift control, retrospective, logging
â”‚
â”œâ”€â”€ persistence/    â—‹ Event sourcing, checkpoints, recovery
â”‚
â”œâ”€â”€ providers/      â—‹ LiteLLM adapter (100+ models)
â”‚
â””â”€â”€ cli/            â—‹ Command-line interface
```

<br/>

---

<br/>

## â—ˆ The Personas (Lateral Thinking Agents)

<br/>

> *When stuck, the system doesn't retry harder. It switches persona and thinks differently.*

<br/>

| Persona | Strategy | Trigger | Behavior |
|:--------|:---------|:--------|:---------|
| **THE HACKER** | *"Elegance be damned. Make it work."* | Quick fix needed | Hardcode, skip abstractions, brute force |
| **THE RESEARCHER** | *"Stop coding. Read the docs."* | Knowledge gap detected | Search, read documentation, find examples |
| **THE SIMPLIFIER** | *"Cut scope in half. Return to MVP."* | Overengineering detected | Remove features, reduce complexity |
| **THE ARCHITECT** | *"Question the foundation. Rebuild if needed."* | Structural issues | Redesign, refactor core assumptions |
| **THE CONTRARIAN** | *"What if we're solving the wrong problem?"* | Root cause unclear | Challenge assumptions using ontological questions |

<br/>

**How it works**: Stagnation Detection (4 patterns) â†’ Persona Rotation â†’ Retry with fresh perspective

<br/>

---

<br/>

## â—ˆ The Eternal Cycle

<br/>

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                         â”‚
                              â–¼                         â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
                    â”‚                   â”‚              â”‚
                    â”‚   S E E D         â”‚              â”‚
                    â”‚   Ambiguity â‰¤ 0.2 â”‚              â”‚
                    â”‚                   â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                              â”‚                         â”‚
                              â–¼                         â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
                    â”‚                   â”‚              â”‚
                    â”‚   E X E C U T E   â”‚              â”‚
                    â”‚   PAL â†’ Diamond   â”‚              â”‚
                    â”‚                   â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                              â”‚                         â”‚
                              â–¼                         â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
                    â”‚                   â”‚              â”‚
                    â”‚  RETROSPECTIVE    â”‚              â”‚
                    â”‚  Every 3 cycles   â”‚              â”‚
                    â”‚                   â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                              â”‚                         â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                â”‚
                      â–¼               â–¼                â”‚
                                                       â”‚
                 Drift OK        Drift High            â”‚
                    â”‚                 â”‚                â”‚
                    â–¼                 â”‚                â”‚
                 Continue             â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  Re-examine Seed
```

<br/>

The system doesn't blindly loop.
It **questions its own direction**.

When drift exceeds threshold, it returns to the beginningâ€”
not to restart, but to **re-crystallize** with new understanding.

<br/>

---

<br/>

## â—ˆ Prerequisites

<br/>

| Requirement | Description |
|-------------|-------------|
| **Python 3.14+** | Required (uses latest language features) |
| **Claude Code Max Plan** | For orchestrator mode (no API key needed) |
| **OR API Key** | OpenRouter, Anthropic, or OpenAI for LiteLLM mode |

<br/>

---

<br/>

## â—ˆ Installation

<br/>

```bash
pip install ouroboros-ai
# or
uv pip install ouroboros-ai
```

<br/>

---

<br/>

## â—ˆ Quick Start

<br/>

### Using Claude Code Max Plan (Recommended)

No API key required â€” uses your Claude Code subscription directly.

```bash
# Begin the Big Bang (interactive interview)
ouroboros init start --orchestrator "I want to build a task management CLI"

# Execute via Claude Agent SDK
ouroboros run workflow --orchestrator seed.yaml
```

### From Source (Development)

```bash
# Clone
git clone https://github.com/Q00/ouroboros
cd ouroboros

# Install
uv sync

# Begin the Big Bang (interactive interview)
uv run ouroboros init start --orchestrator "I want to build a task management CLI"

# Execute via Claude Agent SDK
uv run ouroboros run workflow --orchestrator seed.yaml
```

### Using External LLM (LiteLLM)

Requires API key (OPENROUTER_API_KEY, ANTHROPIC_API_KEY, etc.)

```bash
# Begin the Big Bang
uv run ouroboros init start "I want to build a task management CLI"

# Check status
uv run ouroboros status health
```

> ğŸ“– **[Full Guide: Running with Claude Code](docs/running-with-claude-code.md)** | **[CLI Reference](docs/cli-reference.md)**

<br/>

---

<br/>

## â—ˆ Anti-Patterns

<br/>

> *What we explicitly reject:*

<br/>

| âœ— Anti-Pattern | Problem | âœ“ Our Solution |
|----------------|---------|----------------|
| Consensus Everywhere | Cost explosion | Gate-only consensus |
| Frontier First | Wasteful | Frugal first, escalate |
| Infinite Retry | Stagnation | Lateral thinking |
| Immediate Optimization | Yak shaving | TODO registry (defer) |
| Vague Seeds | GIGO | Ambiguity â‰¤ 0.2 |

<br/>

---

<br/>

## â—ˆ Security

<br/>

Ouroboros includes built-in security features:

| Feature | Description |
|---------|-------------|
| **API Key Masking** | Keys are automatically masked in logs (`sk-...xxxx`) |
| **Log Sanitization** | Sensitive fields (password, token, secret) are redacted |
| **Input Validation** | Size limits prevent DoS attacks (50KB context, 1MB seed files) |
| **Credentials Protection** | `credentials.yaml` uses chmod 600 permissions |

```python
from ouroboros.core import mask_api_key, sanitize_for_logging

# Mask API keys for display
masked = mask_api_key("sk-1234567890abcdef")  # "sk-...cdef"

# Sanitize dicts before logging
safe_data = sanitize_for_logging({"api_key": "sk-secret", "name": "test"})
# {"api_key": "<REDACTED>", "name": "test"}
```

<br/>

---

<br/>

## â—ˆ Development

<br/>

```bash
# Install all dependencies
uv sync --all-groups

# Run tests
uv run pytest

# Type checking
uv run mypy src/

# Lint
uv run ruff check src/

# Format
uv run ruff format src/
```

<br/>

---

<br/>

## â—ˆ Contributing

<br/>

Contributions are welcome! Please see:

- **Issues**: [GitHub Issues](https://github.com/Q00/ouroboros/issues) for bugs and feature requests
- **Discussions**: [GitHub Discussions](https://github.com/Q00/ouroboros/discussions) for questions and ideas

<br/>

---

<br/>

## â—ˆ Roadmap

<br/>

### Completed

```
[â– â– â– â– â– â– â– â– â– â– ] Epic 0  Foundation          âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 1  Big Bang            âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 2  PAL Router          âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 3  Double Diamond      âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 4  Resilience          âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 5  Evaluation          âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 6  Drift Control       âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 7  Secondary Loop      âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 8  Orchestrator        âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 9  MCP Integration     âœ“
[â– â– â– â– â– â– â– â– â– â– ] Epic 10 TUI Mode            âœ“
```

### Upcoming

| Feature | Description | Status |
|---------|-------------|--------|
| **Worker MCP** | MCP server for distributed task execution | Planned |
| **TUI Enhancement** | Rich terminal UI with real-time progress | Planned |
| **AC Tree Visualization** | Interactive acceptance criteria graph | Planned |
| **Plugin System** | Custom evaluators and personas | Planned |
| **Web Dashboard** | Execution monitoring and analytics | Planned |

<br/>

---

<br/>

## â—ˆ Why "Ouroboros"?

<br/>

<table>
<tr>
<td width="100%">

```

                                    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
                                â•­â”€â”€â”€â•¯          â•°â”€â”€â”€â•®
                              â•­â”€â•¯                  â•°â”€â•®
                             â•­â•¯        â—¯ â† â—¯        â•°â•®
                             â”‚       â†—       â†˜       â”‚
                             â”‚      â—¯    âš¬    â—¯      â”‚
                             â”‚       â†–       â†™       â”‚
                             â•°â•®        â—¯ â†’ â—¯        â•­â•¯
                              â•°â”€â•®                  â•­â”€â•¯
                                â•°â”€â”€â”€â•®          â•­â”€â”€â”€â•¯
                                    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

                     The serpent that devours itself to be reborn.


```

</td>
</tr>
</table>

<br/>

The ouroboros has symbolized eternal cycles of renewal for millennia.

Software development is no different:

```
Write â†’ Test â†’ Fail â†’ Learn â†’ Rewrite â†’ Test â†’ ...
```

The question is not *whether* to iterate, but *how to iterate wisely*.

<br/>

**Ouroboros answers:**

1. **Start with truth** â€” Socratic questioning extracts essence
2. **Be frugal in execution** â€” Don't waste intelligence on simple problems
3. **Be rigorous in verification** â€” Critical decisions need consensus
4. **Trust the cycle** â€” Let the serpent eat its tail and be reborn

<br/>

---

<br/>

<p align="center">
  <br/>
  <br/>
  <em>"The beginning is the end, and the end is the beginning."</em>
  <br/>
  <br/>
  <br/>
</p>

---

<br/>

<p align="center">
  <code>MIT License</code>
</p>

<br/>
